<!--    We are using underscore.js templating
        http://underscorejs.org/#template     
-->

<!--    Template functions can both interpolate variables, using <%= … %>, 
        as well as execute arbitrary JavaScript code, with <% … %>. 
        If you wish to interpolate a value, and have it be HTML-escaped, use <%- … %>
-->


<script type="text/template" id="content-template">
    <p>This is from the: content-template</p>
    <% //debugger; %>
    <div class="container">
        <div class="row">
            <div class="col-md-7" id="mainCol">
                <% _.each(fetched_content, function(content)  { %>
                    <h2><%= content.main.headLine %></h2>

                <% // -- Check for images here -- %>
                <% if(content.main.numberOfImages > 0) { %>
                    <% for (var i=0; i < content.main.numberOfImages; i++){ %>
                        <div class="imagePlaceHolder imagePlaceHolderBig">
                            <span>PHOTO</span>
                        </div>
                    <% } %>
                <% } %>

                    <br />
                    <p>
                        <%= content.main.location.toUpperCase() %>
                        <%= content.main.fullStory %>
                    </p>
                <% }); %>
            </div>
            <aside class="col-md-5" id="asideCol">
                <% _.each(fetched_content, function(content)  { %>
                    <h4><%= content.aside.headLine %></h4>
                    <br />
                    <p>
                        <%= content.aside.location.toUpperCase() %>
                        <%= content.aside.fullStory %>

                        <% // -- Check for images here -- %>
                        <% if(content.aside.numberOfImages > 0) { %>
                            <%= content.aside.fullStory.replace("<br>", "<div class='imagePlaceHolder'>PHOTO</div>") %>
                        <% } else { %>
                            <%= content.aside.fullStory %>
                        <% } %>
                    </p>
                <% }); %>
            </aside>
        </div>
</script>
